!function(){var e="(max-width: 50rem)";class t extends class{_KEYS={ESC:27,SPACE:32,ENTER:13,TAB:9,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40};#focusableElements='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), select, details, audio, video, object, [contenteditable=""], [contenteditable="true"], [tabindex]:not([tabindex="-1"])';#defaultOptions={focusTrap:!1,collapseOnFocusOut:!1};#destroyed=!1;constructor(e){this._options=Object.assign(this.#defaultOptions,e),this._$el=document.querySelector(this._options.selector),this.#check()?(this._getFocusableContent(),this._$lastFocusableEl=this._$el.querySelector('[data-select-last="true"]'),this.#init()):this._hasErrors=!0}#check(){return this._$el?!(void 0!==this._options.matchMedia&&!window.matchMedia(this._options.matchMedia).matches):(console.error("Не найден класс - "+this._options.selector),!1)}#init(){this._$el.addEventListener("click",e=>this._mainElClick(e)),this._$el.addEventListener("keydown",e=>this._checkPress(e),!0),this._$lastFocusableEl&&(this._$lastFocusableEl.tabIndex=-1),this._$focusableContent=this._$focusableContent.filter(e=>{if(e!==this._$lastFocusableEl)return e})}#focusTrapAndCollapse(e){const t=this._$focusableContent[0],s=this._$focusableContent[this._$focusableContent.length-1],i=this._$lastFocusableEl;e.shiftKey?document.activeElement!==t&&document.activeElement!==i||(i&&document.activeElement!==i&&!this._options.collapseOnFocusOut?i.focus():(this._options.collapseOnFocusOut&&this.close(),s.focus()),e.preventDefault()):document.activeElement!==s&&document.activeElement!==i||(i&&document.activeElement!==i?i.focus():(this._options.collapseOnFocusOut&&this.close(),t.focus()),e.preventDefault())}_checkPress(e){e.keyCode===this._KEYS.ESC&&this.close(),"Tab"!==e.key&&e.keyCode!==this._KEYS.TAB||(this._options.focusTrap||this._options.collapseOnFocusOut)&&this.#focusTrapAndCollapse(e)}_mainElClick(e){(e.target.closest('[data-close="true"]')||e.target.dataset.close)&&this.close()}_getFocusableContent(){this._$focusableContent=[...this._$el.querySelectorAll(this.#focusableElements)]}open(){if(this.#destroyed)return console.error(`Объект с классом - ${this._options.selector} уничтожен и не может быть "Открыт"`);this._options.activeClass?this._$el.classList.add(this._options.selector.slice(1)+this._options.activeClass):this._$el.removeAttribute("hidden",""),document.body.style.overflow="hidden"}close(){this.destroy(),this._options.activeClass?this._$el.classList.remove(this._options.selector.slice(1)+this._options.activeClass):this._$el.setAttribute("hidden",""),document.body.style.overflow=""}destroy(){this._$el.removeEventListener("click",e=>this._mainElClick(e)),this._$el.removeEventListener("keydown",e=>this._checkPress(e),!0)}}{#defaultOptions={overlay:!0,overlayBg:"rgba(0,0,0, 0.5)",overlayZindex:"0"};#OVERLAY_ANIMTAION_TIME=300;#$activeOpenBtn;constructor(e){super(e),this.#check()&&(this._options=Object.assign(this.#defaultOptions,this._options),this._$openBtns=document.querySelectorAll(this._options.openBtnsSelector),this.#init())}#check(){return!this._hasErrors}#init(){if(this._$el.setAttribute("role","dialog"),this._$el.setAttribute("aria-modal","true"),this._$el.setAttribute("aria-hidden","true"),this._options.overlay){const e=document.createElement("div");e.style.backgroundColor=this._options.overlayBg,e.style.position="fixed",e.style.inset="auto",e.style.opacity=0,e.classList.add(this._options.selector.slice(1)+"__overlay"),e.style.zIndex=this._options.overlayZindex,e.style.transition=`all ${this.#OVERLAY_ANIMTAION_TIME}ms ease`,e.addEventListener("click",this.close.bind(this)),"static"===this._$el.querySelector(":first-child").style.position&&(this._$el.querySelector(":first-child").style.position="relative"),this._$el.querySelector(":first-child").style.zIndex=toString(parseInt(this._options.overlayZindex)+1),this._$el.insertBefore(e,this._$el.firstChild)}this._options.activeClass&&this._$focusableContent.forEach(e=>{e.tabIndex=-1}),this._$openBtns&&this._$openBtns.forEach(e=>{e.setAttribute("aria-haspopup","dialog"),e.addEventListener("click",this.open.bind(this))})}open(){setTimeout(()=>{"false"!==this._$el.getAttribute("aria-hidden")?(this.#$activeOpenBtn=document.activeElement,super.open(),this._options.activeClass&&this._$focusableContent.forEach(e=>{e.dataset.selectLast||e.removeAttribute("tabindex")}),this._$el.setAttribute("aria-hidden","false"),0<this._$focusableContent.length&&this._$focusableContent[0].focus(),this._$el.querySelector(":first-child").style.inset="0",this._$el.querySelector(":first-child").style.opacity="1"):this.close()},1)}close(){super.close(),this._options.activeClass&&this._$focusableContent.forEach(e=>{e.tabIndex=-1}),setTimeout(()=>{-1!==this.#$activeOpenBtn.tabIndex&&this.#$activeOpenBtn.focus(),"function"==typeof this._options.onClose&&this._options.onClose()},1),this._$el.querySelector(":first-child").style.opacity="0",setTimeout(()=>{this._$el.querySelector(":first-child").style.inset="auto"},this.#OVERLAY_ANIMTAION_TIME),this._$el.setAttribute("aria-hidden","true")}}(class{constructor(e){this.constructorOptions=e,this.init()}static init(){this.options=Object.assign({errorClassName:"form__error",inputClassName:"form__input",invalidClassName:"invalid",withValueClassName:"not-empty",errors:{required:"Required field",email:"Please enter the right email",type:"Invalid field format",pattern:"Invalid field format",tooShort:"Too short",tooLong:"Too wild",stepMismatch:"Wrong step (introduced range)",rangeUnderflow:"Less range",rangeOverflow:"More range",customError:"Error",badInput:"badInput"}},this.constructorOptions),this.forms=document.querySelectorAll("form"),this.forms||console.error("Форма на странице не найдена"),this.forms.forEach(e=>{const t=e.querySelectorAll("input");t.forEach(e=>{const t=document.createElement("span");t.classList.add(this.options.errorClassName),t.setAttribute("aria-live","polite"),e.insertAdjacentElement("afterend",t),e.addEventListener("blur",e=>{this.validate(e),this.isEmpty(e)})}),e.addEventListener("submit",e=>{this.checkValid(e)})})}static isEmpty(e){0<(e=e.target?e.target:e).value.length?e.classList.add(this.options.inputClassName+"--"+this.options.withValueClassName):e.classList.remove(this.options.inputClassName+"--"+this.options.withValueClassName)}static validate(e){const t=(e=e.target?e.target:e).nextElementSibling;if(!e.validity.valid){if(e.validity.valueMissing)return this.setInvalid(e,this.options.errors.required),t;if(e.validity.typeMismatch)return this.setInvalid(e,this.options.errors.type),t;if(e.validity.patternMismatch)return this.setInvalid(e,this.options.errors.pattern),t;if(e.validity.tooShort)return this.setInvalid(e,this.options.errors.tooShort),t;if(e.validity.tooLong)return this.setInvalid(e,this.options.errors.tooLong),t;if(e.validity.stepMismatch)return this.setInvalid(e,this.options.errors.stepMismatch),t;if(e.validity.rangeUnderflow)return this.setInvalid(e,this.options.errors.rangeUnderflow),t;if(e.validity.rangeOverflow)return this.setInvalid(e,this.options.errors.rangeOverflow),t;if(e.validity.customError)return this.setInvalid(e,this.options.errors.customError),t;if(e.validity.badInput)return this.setInvalid(e,this.options.errors.badInput),t}e.classList.remove(this.options.inputClassName+"--"+this.options.invalidClassName),t.innerHTML=""}static setInvalid(e,t){const s=e.nextElementSibling;e.classList.add(this.options.inputClassName+"--"+this.options.invalidClassName),s.innerHTML=t}static checkValid(e){let t=new Array;const s="object"==typeof e.currentTarget?e.currentTarget:e,i=s.querySelectorAll("input");if("object"==typeof e.currentTarget&&e.preventDefault(),i.forEach(e=>{t.push(this.validate(e))}),t=t.filter(function(e){return void 0!==e}),0===t.length)return s.submit(),!0;t[0].previousSibling.focus()}}).init();new t({selector:".nav",openBtnsSelector:['[data-name="header-modal"]'],focusTrap:!0,collapseOnFocusOut:!1,activeClass:"--active",overlay:!1,matchMedia:e});const i=document.querySelector(".discover"),o=document.querySelector(".discover__burger");if(window.addEventListener("load",function(e){i.classList.remove("loading"),o.classList.add("descover__first");const t=o.getAnimations().length;let s=0;o.addEventListener("animationend",()=>{s++,s===t&&(o.classList.remove("descover__first"),o.dataset.type="explosion")}),function(){const c=document.querySelector("#ingredient"),d=document.querySelector(".ingredients");let t;!function(e,t){var s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",e,!0),s.onreadystatechange=function(){4===s.readyState&&"200"==s.status&&t(s.responseText)},s.send(null)}("./files/data/data.json",function(e){t=JSON.parse(e),t.forEach((e,t)=>{if(e.auto)return u.push(e),void 0;const s=c.content.cloneNode(!0),i=document.createElement("img"),o=s.querySelector(".ingredient__name"),a=s.querySelector(".ingredient__plus"),n=s.querySelector(".ingredient__minus");var r=s.querySelector(".ingredient__amount");i.classList.add("ingredient__img"),i.src=e.img,o.innerHTML=e.name,d.appendChild(s);const l=d.querySelector(".ingredient:last-of-type");l.insertBefore(i,o),e.amount=r,a.addEventListener("click",()=>h(e)),n.addEventListener("click",()=>m(e))}),h(u[1])})}()}),window.matchMedia(e).matches){const S=document.querySelector('.nav__item[href="#burger"]'),C=document.querySelector('.nav__item[href="#discover"]'),$=document.querySelector("#burger");window.onscroll=()=>{!function(e){e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}($)?(C.setAttribute("aria-selected","true"),S.removeAttribute("aria-selected")):(S.setAttribute("aria-selected","true"),C.removeAttribute("aria-selected"))}}else{const L=document.querySelector(".nav__box"),q=[...document.querySelectorAll(".tab-item")],w=[...document.querySelectorAll(".tab-panel")];let o=0;L.setAttribute("role","tablist"),q[o].setAttribute("aria-selected","true"),w.forEach(e=>e.setAttribute("role","tabpanel")),w.filter((e,t)=>t!==o).forEach(e=>{e.hidden=!0}),q.forEach((t,e)=>{t.setAttribute("role","tab");const s=t.querySelector("a");s.getAttribute("href").slice(1);s.setAttribute("role","presentation"),s.setAttribute("tabindex","0"),s.removeAttribute("href"),t.setAttribute("id","tab-"+e),t.setAttribute("aria-controls","panel-"+e),t.dataset.number&&(e=parseInt(t.dataset.number)),w[e].setAttribute("id","panel-"+e),w[e].setAttribute("aria-labelledby","tab-"+e);const i=e=>{o=q.indexOf(e),e.dataset.number&&(o=parseInt(e.dataset.number)),q[o].setAttribute("aria-selected","true"),q[o].querySelector("a").setAttribute("aria-selected","true"),w[o].hidden=!1,q.filter((e,t)=>t!==o).forEach(e=>{e.setAttribute("aria-selected","false"),e.querySelector("a").setAttribute("aria-selected","false")}),w.filter((e,t)=>t!==o).forEach(e=>{e.hidden=!0})};t.addEventListener("click",()=>i(t)),t.addEventListener("keydown",e=>{13===e.keyCode&&i(t)})})}const a=document.querySelector(".burger__checkout-summ"),n=[...document.querySelectorAll(".burger__summary-data-name")],u=[],h=s=>{a.dataset.price=(parseFloat(a.dataset.price)+s.price).toFixed(2),n.forEach(e=>{if("min"===e.dataset.name&&(e.dataset.value=(parseFloat(e.dataset.value)+s.min).toFixed(2)),"oz"===e.dataset.name&&(e.dataset.value=(parseFloat(e.dataset.value)+s.oz).toFixed(1)),"kcal"===e.dataset.name){const t=parseFloat(e.dataset.value)+s.kcal;e.dataset.value=t.toFixed(0),f(t)}}),s.amount&&s.amount.dataset.value++;var e=[...l.querySelectorAll(".burger__scene-element")];v&&(clearTimeout(v),v=null),null!==l.querySelector(`[data-name="${u[0].name}"]`)&&m(u[0]),0<e.length&&(v=setTimeout(()=>{h(u[0]),clearTimeout(v),v=null},r)),function(e){const t=document.createElement("img"),s=d+e.width;t.classList.add("burger__scene-element"),t.src=e.img_group||e.img,t.setAttribute("alt",e.name),t.setAttribute("data-name",e.name),t.style.bottom=s+"%",t.style.opacity=0,_=e.width*p,l.appendChild(t),setTimeout(()=>{t.style.bottom=c+"%",t.style.opacity=1,c+=e.width+_},1),Math.floor(c)}(s)},m=s=>{v&&(clearTimeout(v),v=null),s.amount&&0===parseInt(s.amount.dataset.value)||(a.dataset.price=(parseFloat(a.dataset.price)-s.price).toFixed(2),n.forEach(e=>{if("min"===e.dataset.name&&(e.dataset.value=(parseFloat(e.dataset.value)-s.min).toFixed(0)),"oz"===e.dataset.name&&(e.dataset.value=(parseFloat(e.dataset.value)-s.oz).toFixed(1)),"kcal"===e.dataset.name){const t=parseFloat(e.dataset.value)-s.kcal;e.dataset.value=t.toFixed(0),f(t)}}),s.amount&&s.amount.dataset.value--,function(t){const e=l.querySelectorAll(`[data-name="${t.name}"]`),s=e[e.length-1];if(s){const a=[...l.querySelectorAll(".burger__scene-element")];var i=a.indexOf(s);s.classList.add("burger__scene-element--delete"),s.dataset.name="delete",s.addEventListener("animationend",()=>{l.removeChild(s)}),_=t.width*p,c-=t.width+_;for(let e=i+1;e<a.length;e++){const n=a[e];var o=parseInt(n.style.bottom,10)-t.width-_;n.style.bottom=o+"%"}}Math.floor(c)}(s))};const r=3e3,l=document.querySelector(".burger__scene");let c=0;const d=80,p=window.matchMedia(e).matches?0:.4;let _,v;const s=document.querySelector(".burger__question"),f=e=>{3e3<e?s.classList.add("msg--show"):s.classList.remove("msg--show")},b=document.querySelector(".burger__ketchup"),y=document.querySelector(".burger__additionally"),g=y.querySelector(".burger__additionally-name"),E=y.querySelector(".burger__additionally-params").dataset.value,A=document.querySelector('.burger__summary-data-name[data-name="oz"]');y.addEventListener("click",()=>{b.classList.toggle("burger__ketchup--show"),"+"===g.dataset.content?(g.dataset.content="-",A.dataset.value=(parseFloat(A.dataset.value)+parseFloat(E)).toFixed(1)):(g.dataset.content="+",A.dataset.value=(parseFloat(A.dataset.value)-parseFloat(E)).toFixed(1))});new t({selector:".nav__person-menu",openBtnsSelector:[".nav__person"],focusTrap:!1,collapseOnFocusOut:!0,activeClass:"--active",overlay:!1});window.addEventListener("DOMContentLoaded",function(){[].forEach.call(document.querySelectorAll("[type=tel]"),function(e){let r;function t(e){e.keyCode&&(r=e.keyCode);this.selectionStart;let t="+7 (___) ___ ____",s=0,i=t.replace(/\D/g,""),o=this.value.replace(/\D/g,""),a=t.replace(/[_\d]/g,function(e){return s<o.length?o.charAt(s++)||i.charAt(s):e});s=a.indexOf("_"),-1!=s&&(s<5&&(s=3),a=a.slice(0,s));let n=t.substr(0,this.value.length).replace(/_+/g,function(e){return"\\d{1,"+e.length+"}"}).replace(/[+()]/g,"\\$&");n=new RegExp("^"+n+"$"),(!n.test(this.value)||this.value.length<5||47<r&&r<58)&&(this.value=a),"blur"==e.type&&this.value.length<5&&(this.value="")}e.addEventListener("input",t,!1),e.addEventListener("focus",t,!1),e.addEventListener("blur",t,!1),e.addEventListener("keydown",t,!1)})}),modalForm=new t({selector:".checkout-form",openBtnsSelector:[".burger__checkout-btn"],focusTrap:!0,collapseOnFocusOut:!1,activeClass:"--active",overlayBg:"rgba(82, 67, 194, 0.9)"})}();